<Doctype HTML>
<HTML>
	<head>
		<title>Who He Play For?</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
		<script>
		
		</script>
		<script>
			var playerList = [];
			var currPlayer;
			var score = 0;
			$.ajax({
			  url: '/JSONreq',
			  complete: function(data) {
			    playerList = data.responseJSON.playerList;
			    console.log(data);
			    newPlayer();
			  }
			});
			function newPlayer(pass){ 
					var randIndex = Math.floor(playerList.length * Math.random());
					currPlayer = playerList[randIndex];
					console.log(currPlayer);
					if(!pass) {
						playerList.splice(randIndex, 1); //Take player out of remaining players if the player passed
					}
					$('#img').html("<img src=' " + currPlayer.url +"'>");
			}
			function check() {
				var guess = $('input').val().toLowerCase();
				var answer = currPlayer.name.toLowerCase();
				//Allow user to also put in last name
				var lastNameGuessArray = guess.split(" ");
				var lastNameArray = answer.split(" ");
				console.log(lastNameGuessArray);
				console.log(lastNameArray);
				var lastNameGuess = "";
				var lastName = "";
				for(var i = 0; i < lastNameArray.length; i++) {
					lastNameGuess +=lastNameGuessArray[i];
					lastName += lastNameArray[i+1];
				}
				console.log(guess);
				console.log(answer);
				console.log(lastNameGuess);
				console.log(lastName);
				if(guess === answer || lastNameGuess === lastName) {
					newPlayer();
					score+=1;
					$('#score').html(score);
				} else {
					//Indicate wrong name by flashing or something
				}
				$('input').val('');
			}
			window.addEventListener('keydown', function(e) {
				if (e.keyCode === 13) {
					check();
				} else if (e.keyCode === 32) {
					newPlayer(true);
				}
			});
		</script>
	</head>
	<body>
		<p1>Who He Play For?</p1>
		<div id="score">0</div>
		<div id="img"></div><br>
		<input type="text"> 
		<button onclick="check()">Enter</button>
		<button onclick="newPlayer(true)">Pass</button>	
	</body>
<HTML>